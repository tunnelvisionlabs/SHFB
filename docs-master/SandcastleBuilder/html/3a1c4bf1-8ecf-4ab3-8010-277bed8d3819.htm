<html><head><META http-equiv="Content-Type" content="text/html; charset=utf-8"><link rel="shortcut icon" href="../icons/favicon.ico"><link rel="stylesheet" type="text/css" href="../styles/branding.css"><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css"><script type="text/javascript" src="../scripts/branding.js"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Data Caching Build Components</title><meta name="Language" content="en-us"><meta name="System.Keywords" content="build components, data caching"><meta name="Microsoft.Help.Id" content="3a1c4bf1-8ecf-4ab3-8010-277bed8d3819"><meta name="Description" content="The BuildAssembler step of the build process typically takes the most time and consumes the most memory. Slow build times in this step are typically the result of the Resolve Reference Links component when using MSDN style SDK links."><meta name="Microsoft.Help.ContentType" content="Concepts"><meta name="BrandingAware" content="'true'"><meta name="SelfBranded" content="true"></head><body onload="onLoad()"><header class="ux-header"><div class="header-top-bar">Sandcastle Help File Builder Documentation</div></header><div class="OH_outerDiv" style="padding: 35px 20px 0 20px;"><div class="OH_leftNav" id="LeftNav">
  <div id="tocnav">
    <div class="toclevel0" data-toclevel="0" style="padding-left: 0px;"><a class="toc_collapsed" onclick="javascript: Toggle(this);" href="#!"></a><a data-tochassubtree="true" href="bd1ddb51-1c4f-434f-bb1a-ce2135d3a909.htm" title="Sandcastle Help File Builder" tocid="roottoc">Sandcastle Help File Builder</a></div><div class="toclevel0" data-toclevel="0" style="padding-left: 0px;"><a class="toc_collapsed" onclick="javascript: Toggle(this);" href="#!"></a><a data-tochassubtree="true" href="8dcbb69b-7a1a-4049-8e6b-2bf344efbbc9.htm" title="Custom Build Components" tocid="8dcbb69b-7a1a-4049-8e6b-2bf344efbbc9">Custom Build Components</a></div><div class="toclevel1 current" data-toclevel="1" style="padding-left: 13px;" data-childrenloaded="true"><a class="toc_expanded" onclick="javascript: Toggle(this);" href="#!"></a><a data-tochassubtree="true" href="3a1c4bf1-8ecf-4ab3-8010-277bed8d3819.htm" title="Data Caching Build Components" tocid="3a1c4bf1-8ecf-4ab3-8010-277bed8d3819">Data Caching Build Components</a></div><div class="toclevel2" data-toclevel="2" style="padding-left: 26px; display: block;"><span class="toc_empty"></span><a data-tochassubtree="false" href="2e8fa0c8-d7ec-4f7e-b42f-ac2718312ffc.htm" title="ESENT Caching Components" tocid="2e8fa0c8-d7ec-4f7e-b42f-ac2718312ffc">ESENT Caching Components</a></div><div class="toclevel2" data-toclevel="2" style="padding-left: 26px; display: block;"><span class="toc_empty"></span><a data-tochassubtree="false" href="0f0cc654-6ddf-4673-a001-b29885ca0310.htm" title="SQL Server Caching Component" tocid="0f0cc654-6ddf-4673-a001-b29885ca0310">SQL Server Caching Component</a></div></div></div><div id="TocResize" class="OH_TocResize"><img id="ResizeImageIncrease" src="../icons/open.gif" onclick="onIncreaseToc()" alt="Expand" title="Expand"><img id="ResizeImageReset" src="../icons/close.gif" style="display:none" onclick="onResetToc()" alt="Minimize" title="Minimize"></div><div class="OH_outerContent" id="OuterContent" style="margin-left: 280px;"><h1 class="title">Data Caching Build Components</h1><div id="mainSection"><div id="mainBody"><span class="introStyle"></span><div class="introduction"><p>The <strong>BuildAssembler</strong> step of the build process typically takes the most time
and consumes the most memory.  Slow build times in this step are typically the result of the <strong>Resolve
Reference Links</strong> component when using MSDN style SDK links.  In such cases, the component has to
contact the MSDN web service to resolve the reference link to an online content ID.  In addition, it has to load
a large amount of information about the underlying .NET framework.  The <strong>Copy From Index</strong>
component instances that load reflection index data and XML comments index data can also consume a large amount
of memory.  In earlier versions of the Sandcastle tools, the data set for the entire framework was loaded which
slowed down component initialization and wasted memory.</p><p>Earlier versions of the Sandcastle Help File Builder mitigated these issues somewhat by providing
versions of the build components that cached the processed data to disk and reloaded it on subsequent builds.
While this helped speed up initialization and improved build times by caching the MSDN content IDs, it did not
help reduce memory usage.  Building multiple help file formats also increased memory usage significantly because
multiple instances of the build components used for each format did not share common data between them.</p></div><p>Starting with version 2.7.3.0 of the Sandcastle tools deployed with version 1.9.7.0 of the
Sandcastle Help File Builder, the <strong>Resolve Reference Links</strong> and <strong>Copy From
Index</strong> build components have been reworked to improve their performance and support data caching by
default:</p><ul><li><p>The components have been updated to support filtering by namespace when loading reflection
data.  This helps to reduce the amount of framework information that needs to be loaded by as much as 75%.</p></li><li><p>The reflection data and XML comments files are loaded in parallel.  Combined with the reduced
set of files, this can improve component initialization time by as much as 50% or more on multi-core machines.</p></li><li><p>The common data is shared amongst all instances of the components.  As such, building multiple
help file formats in one build does not consume that much more memory than building a single help file format.</p></li><li><p>The <strong>Resolve Reference Links</strong> component contains built-in support for
saving resolved MSDN content IDs to a cache file.  This information can be reloaded on subsequent builds thus
saving the time required to look up the IDs.  On machines with a slow internet connection, this can reduce the
build time by 70% or more.</p></li><li><p>The API for the two build components was also revised to allow for derived build components
that implement alternate caching mechanisms for MSDN content IDs, reflection target data, reflection index data,
and XML comments index data.  The help file builder contains alternate implementations of the components that
allow caching the framework data to ESENT or SQL Server databases.  These further reduce the memory requirements
but can add to the build time in larger projects.</p></li></ul><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">Component Usage</div></div><p>For most projects, the default component configurations defined in the Sandcastle Help File
Builder's template files should prove to be sufficient.  They will filter the reflection data by namespace and
enable MSDN content ID caching by default.</p><div class="alert"><table><tr><th><img src="../icons/alert_note.gif" alt="Note"> <strong>Note</strong></th></tr><tr><td><p>The MSDN URL cache is cumulative so you must perform at least one build with each project so as
to ensure that all URLs for the given project are in the cache.  To rebuild the cache file, simply delete it and
rebuild your project files.  See the <a href="a24489fb-45d6-46f4-9eaa-9a9c4e0919b2.htm#BuildSettings">Special Folder Locations</a>
topic for the location of the cache files.</p></td></tr></table></div><p>Caching the MSDN content IDs provides the largest performance increase.  This will be most evident
in control libraries in which the classes are derived from Windows Forms, WPF, or web controls which have a large
number of inherited members thus causing a spike in the number of web service lookups that occur.  Non-UI
projects with base classes that are simpler result in fewer lookups and benefit less.</p><p>After the initial build, using cached MSDN content IDs is almost equivalent to setting the
<span class="code">*SdkLinkType</span> property to <span class="code">None</span> / <span class="code">Index</span>
/ <span class="code">Id</span> in regards to build time but adds the benefit of keeping the actual online links in
place.  That said, the larger the project the less benefit you may see.  For example, if your project contains
10,000+ topics, it is already going to run pretty long and the few minutes saved by the cached IDs and faster
initialization time may end up making little difference in the end.</p><p>For very large projects or for machines that do not have enough memory, the alternate ESENT or
SQL Server implementations can be used.  In extreme cases, the project data can also be cached to provide the
maximum amount of memory to the build process.  To use the ESENT or SQL Server versions of the components, select
the <span class="code">Components</span> property category in the project properties window.  Each version has a
matched set of three components with an "<a href="2e8fa0c8-d7ec-4f7e-b42f-ac2718312ffc.htm">(ESENT Cache)</a>"
or "<a href="0f0cc654-6ddf-4673-a001-b29885ca0310.htm">(SQL Cache)</a>" suffix in its name:</p><ul><li><p>Comments Index Data</p></li><li><p>Reflection Index Data</p></li><li><p>Resolve Reference Links</p></li></ul><p>Add the three matched components noted above to your project.  The configuration dialog will appear
for each as you add it to let you adjust its settings if necessary.  If using the build components in your own
build scripts or with other build tools, see the configuration template files included with the help file builder
for an example of how to add the components to your configuration file.</p><a name="seeAlsoSection"></a><div class="OH_CollapsibleAreaRegion"><div class="OH_regiontitle">See Also</div></div><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="2e8fa0c8-d7ec-4f7e-b42f-ac2718312ffc.htm">ESENT Caching Components</a></div><div class="seeAlsoStyle"><a href="0f0cc654-6ddf-4673-a001-b29885ca0310.htm">SQL Server Caching Component</a></div><div class="seeAlsoStyle"><a href="8dcbb69b-7a1a-4049-8e6b-2bf344efbbc9.htm">Custom Build Components</a></div></div></div></div></div><div id="OH_footer" class="OH_footer"><p><a href="http://SHFB.CodePlex.com" target="_blank">[v2014.4.21.0] Copyright © 2006-2014, Eric Woodruff, All rights reserved</a></p><div class="OH_feedbacklink">Send comments on this topic to
        <a id="HT_MailLink" href="mailto:Eric%40EWoodruff.us?Subject=Sandcastle Help File Builder Documentation">Eric Woodruff</a></div><script type="text/javascript">
        var HT_mailLink = document.getElementById("HT_MailLink");
        var HT_mailLinkText = HT_mailLink.innerHTML;
        HT_mailLink.href += ": " + document.title + "\u0026body=" + encodeURIComponent("Your feedback is used to improve the documentation and the product. Your e-mail address will not be used for any other purpose and is disposed of after the issue you report is resolved. While working to resolve the issue that you report, you may be contacted via e-mail to get further details or clarification on the feedback you sent. After the issue you report has been addressed, you may receive an e-mail to let you know that your feedback has been addressed.");
        HT_mailLink.innerHTML = HT_mailLinkText;
        </script></div><script src="//code.jquery.com/jquery-1.11.0.min.js"></script><script type="text/javascript">$(document).ready(function () {DocumentReady();});</script></body></html>